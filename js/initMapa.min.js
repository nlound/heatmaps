function initialize(){var a=new google.maps.MarkerImage("img/cuidacoches.png");map=new google.maps.Map(document.getElementById("mapaGoogle"),mapOptions),kmzLayer=new google.maps.KmlLayer("http://nlound.github.io/trapitos/data/comunas.kml",{suppressInfoWindows:!0});var b=new google.maps.MVCArray(puntosHeat);heatmap=new google.maps.visualization.HeatmapLayer({radius:15,scaleRadius:!0,data:b});var c=[];for(i=0;i<puntosHeat.length;i++){var d=new google.maps.Marker({position:puntosHeat[i],map:map,icon:a});c.push(d)}var e={gridSize:25,maxZoom:17};markerCluster=new MarkerClusterer(map,c,e),kmzLayer.setMap(map),heatmap.setMap(map)}function changeOpacity(){heatmap.set("opacity",heatmap.get("opacity")?null:.2)}function goHome(){markerCluster.fitMapToMarkers()}var map,pointarray,heatmap,kmzLayer,markerCluster,puntosHeat=[];$.ajax({url:"data/cuidacoches.csv",async:!1,success:function(a){arrayDePuntos=$.csv2Array(a)},dataType:"text",complete:function(){for(var a=1;a<arrayDePuntos.length;a++)puntosHeat.push(new google.maps.LatLng(arrayDePuntos[a][1],arrayDePuntos[a][0]))}}),google.maps.event.addDomListener(window,"load",initialize);